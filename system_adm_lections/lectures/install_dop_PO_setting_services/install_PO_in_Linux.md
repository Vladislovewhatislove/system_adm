# Установка дополнительно ПО в Linux
При установке дополнительного **ПО** в **Linux** есть *два основных варианта:*

- *установка из исходных кодов*
- *установка из скомпилированных бинарных пакетов*.

**Первый вариант** при должном умении способен предоставить более свежие версии *ПО* и оптимизировать под конкретный процессор. Но из минусов - **трудоёмок** *как в установке, так и обслуживании*. Кроме того, на сборку программы из исходных кодов потребуется *время* и *вычислительные ресурсы*. **Неудобство** заключается в том ,что при установке из исходных кодов - **невозможно** *сохранить место установки* и обеспечить их **удаление** или **обновление**.

**Второй вариант** во первых быстрее и не требует мощного *CPU* и много памяти на ЭВМ. 


Есть **два варианта распространения** бинарных пакетов - **обычный архив** и **специальный пакет**, специфичный для определённой системы. 

*Различные дистрибутивы* используют **разные форматы** *пакетов* и *системы* их хранения в репозиториях. 

**Репозиторий** это **место**(на *сайте* или на *устройстве*),в котором содержится *оглавление со списком пакетов* и *сами пакеты*, *распределённые по структуре*. Сейчас все репозитории подписываются **открытым ключом,** чтобы *исключить возможность подмены ,вследствии избавиться от вирусов и троянов*.

*Количество форматов пакетов и репозиториев* гораздо меньше *количества дистрибутивов*. Часто разные дистрибутивы используют один и тот же формат пакетов. Например, **Debian** и **Ubintu** использую **deb** пакеты и одинаковую структуру репозиториев, но разные версии софта.

Внутри пакета содержится **архив с ПО**, **скрипты для его настройки при установке и удалении**, а так же **список зависимостей**. 
Например, при установке LibreOffice в качестве зависимости будет фигурировать библиотека **gtk+**, которая используется для отрисовки интерфейса.

Есть два варианта установки ПО из пакеты:

- Первый - с использование утилиты, работающей непосредственно с пакетами (**dpkg** для **Debian**). Она будет предупреждать об отсутствующих зависимостях и не будет проводить настройку пакетов до установки.
- Второй вариант - с помощью менеджера пакетов (**apt** для **Debian**), который *устанавливает пакеты* из репозиториев с учётом всех их зависимостей. Это позволяет установить любой пакет с **автоматической установкой** всех необходимых ему библиотек.
 
**Разработчики дистрибутива** строят репозиторий как *единый комплекс*— используется одна версия каждой библиотеки для всех программ. 
Такой подход позволяет экономить место как на жёстком диске, так и в **ОЗУ** ЭВМ при работе.
Но с другой стороны это **усложняет и замедляет процесс смены версии библиотеки**, так как нужно *проверить её с другим программным обеспечением*.
Поэтому *дистрибутивы с большим количеством ПО* в официальных репозиториях содержат **не самый свежий софт**. 

**Унификация библиотек** помимо экономии ресурсов, позволяет *достичь  цели* — **всё в репозитории гарантировано работает**
Поэтому значительно упрощается обновление отдельных компонентов — все зависимости известны и можно создать автоматические тесты для проверки совместимости. 
В том числе такой подход позволяет **провести обновление дистрибутива** *по локальной сети* **без загрузки носителей **
**Система репозиториев** имеет ещё *один плюс* — **возможность** создания **собственных коллекций ПО**. 
*Для создания пакетов* и *репозиториев* не требуется никаких дополнительных платных программ и этот процесс **хорошо задокументирован**.

В случае с дистрибутивом **Debian** для **установки отдельных пакетов** используется утилита **dpgk**, **для работы с репозиториями** — **apt**, а так же две оболочки для неё — **aptitude** *(для работы в консоли)* и **synaptic** *(для графического интерфейса пользователя)*.

**Основное действие**, которое используется с утилитой **dpkg** это **установка пакетов**. 
- Установка с параметром `-i (--install)` и указанием пути к пакету
- Удаление пакета с помощью параметра `-r (--remove)` и `-P (--purge)`. *Их действие отличается тем, что при удалении пакетов с помощью **-r** остаются файлы конфигурации и они будут использованы при повторной установке. Параметр **-p** удаляет абсолютно все файлы, которые были установлены для этого пакета.*
- Посмотреть файлы из пакета, используя параметр `-L (--listfiles)`. 
- Параметр `-l (--list)` показывает список установленных пакетов по маске. 
*Просмотр списков пакетов и файлов работает благодаря тому, что **dpkg** ведёт **централизованную базу данных** с записями о всех установленных пакетах и файлах.*

*Это позволяет полностью удалить любую программу*.

Утилита **dpkg** работает только с пакетами, *находящимися локально и не отслеживает их зависимости.*

*Для работы с репозиториями*, *загрузки пакетов* и *установки пакетов* используется утилита **apt**. 

- Установка пишем `install`, он позволяет установить по имени пакет. 
- Удаление пакета `remove` и `purge`.

Для работы с репозиториями добавляется ещё команды.

- `update`  обновляет список пакетов, доступных в репозитории.
- поиск пакетов используется две команды: `search` (поиск строки в имени и описанию пакета) и `list` (показывает пакеты, удовлетворяющие определённому шаблону). 
- просмотр подробной информации о пакете `show` c именем пакета
- обновить все установленные пакеты с помощью `upgrade`. 

*Может случиться так что пакеты конфликтуются.*
И `аpt` постарается предложить решение, при котором устанавливаемые пакеты будут работать. *Это так и установка дополнительного пакета или удаление мешающего*

- запуск `apt` с параметром `instal -f (--fix-broken)`. В этом случае apt постарается найти по зависимостям чего не хватает, *вручную установленному пакету для корректной работы или предложит удалить его*.

*Для использования репозиториев* **система** **должна знать**, где *они размещены*. При установке с диска как правило в конфигурации прописывается один источник пакетов - **установочный диск**. *Сетевые репозитории подключаются вручную.*

*Текущие настройки репозиториев* **apt** в **debian** и ubuntu можно посмотреть в конфигурационном файле `/etc/apt/sources.list` .

Для получения информации о *текущем содержимом репозитория* используется команда `apt update`, которая скачивает текущее оглавление репозитория. После update можно использовать команды `list`, `install` и `update`.